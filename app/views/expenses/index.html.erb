<div class="container">
  <h3>Expenses</h3>

  <%= pie_chart Expense.group(:category).sum(:amount) %>

  <div>
    <% total = 0 %>
    <% @expenses.each do |expense| %>
      <% total += expense.amount %>
    <% end %>
    <div class="d-flex justify-content-between">
      <h5 class="font-weight-bold">Total Expenses $<%= total %></h5>
      <%= link_to "Add Expense", new_expense_path, class: "btn btn-success" %>
    </div>
    <table class="table my-table">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Category</th>
          <th scope="col">Amount(€)</th>
        </tr>
      </thead>
      <tbody>
        <% @expenses.each do |expense| %>
           <tr>
              <td class="font-weight-bold"><%= expense.name.capitalize %></td>
              <td class="text-secondary "><%= expense.category.capitalize %></td>
              <td class="text-secondary"><%= expense.amount %> €</td>
              <td><%= link_to "Edit", edit_expense_path(expense),
              class: "btn btn-success"%>
              </td>
              <td><%= link_to "Delete", expense_path(expense), method: :delete,
              data: { turbo_method: 'DELETE', turbo_confirm: "Delete #{expense.name} Expense?" },
              class: "btn btn-danger" %>
              </td>
            </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
