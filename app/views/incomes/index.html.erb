<div class="container">
  <h3>Incomes</h3>


  <%= pie_chart Income.group(:category).count %>

  <div>
    <% total = 0 %>
    <% @incomes.each do |income| %>
      <% total += income.amount %>
    <% end %>
    <div class="d-flex justify-content-between">
      <h5 class="font-weight-bold">Total Incomes $<%= total %></h5>
      <%= link_to "Add Income", new_income_path, class: "btn btn-success" %>
    </div>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Category</th>
          <th scope="col">Amount(€)</th>
        </tr>
      </thead>
      <tbody>
        <% @incomes.each do |income| %>
           <tr>
              <td class="font-weight-bold"><%= income.name.capitalize %></td>
              <td class="text-secondary "><%= income.category.capitalize %></td>
              <td class="text-secondary"><%= income.amount %> €</td>
              <td><%= link_to "Edit", edit_income_path(income),
              class: "btn btn-success"%>
              </td>
              <td><%= link_to "Delete", income_path(income), method: :delete,
              data: { turbo_method: 'DELETE', turbo_confirm: "Delete #{income.name} income?" },
              class: "btn btn-danger" %>
            </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
